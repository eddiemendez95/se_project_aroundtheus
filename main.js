!function(){"use strict";var e=class{constructor(e,t){var n,r,i;n=this,i=()=>this._inputEls.some((e=>!e.validity.valid)),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_hasInvalidInput"))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this._inputSelector=e.inputSelector,this._submitButton=e.submitButton,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this.buttonElement=this._formElement.querySelector(this._submitButton),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleSubmitBtn(this._inputEls,this.buttonElement)}))}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}toggleSubmitBtn(){this._hasInvalidInput()?(this.buttonElement.classList.add(this._inactiveButtonClass),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove(this._inactiveButtonClass),this.buttonElement.disabled=!1)}resetValidation(){this.toggleSubmitBtn()}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};function t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=class{constructor(e,n,r){t(this,"_handleLikeIcon",(()=>{this._likeButton.classList.toggle("card__like-button_active")})),t(this,"_handleDeleteCard",(()=>{this._element.remove()})),this._name=e.name,this._link=e.link,this._cardTemplate=n,this._handleImageClick=r}_getTemplate(){return document.querySelector(this._cardTemplate).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._cardImage.addEventListener("click",(()=>this._handleImageClick(this._name,this._link))),this._cardDeleteButton.addEventListener("click",this._handleDeleteCard),this._likeButton.addEventListener("click",this._handleLikeIcon)}_openImageModal(){this._handleImageClick(this._name,this._link)}renderCard(){this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._cardImage=this._element.querySelector(".card__image");const e=this._element.querySelector(".card__description-name");return this._cardDeleteButton=this._element.querySelector(".card__trash-button"),this._cardImage.src=this._link,this._cardImage.alt=this._name,e.textContent=this._name,this._setEventListeners(),this._element}};function r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=class{constructor(e){let{popupSelector:t}=e;r(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),r(this,"_handleOverlay",(e=>{e.target.classList.contains("modal_opened")&&this.close()})),this._popup=document.querySelector(t)}open(){this._popup.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose),document.addEventListener("mousedown",this._handleOverlay)}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose),document.removeEventListener("mousedown",this._handleOverlay)}setEventListeners(){this._popup.addEventListener("click",(e=>{e.target.classList.contains("modal__close")&&this.close()}))}},s=class extends i{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popup.querySelector(".modal__form"),this._handleFormSubmit=t,this._formInputs=this._popup.querySelectorAll(".modal__input")}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()}))}};const o={formSelector:".modal__form",inputSelector:".modal__input",submitButton:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},a=document.querySelector("#edit-modal"),l=document.querySelector("#add-card-modal"),c=a.querySelector(".modal__form"),u=l.querySelector(".modal__form"),m=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button"),_=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),c.querySelector("#title-name")),p=c.querySelector("#description-name"),h=(u.querySelector(".modal__input_place"),u.querySelector(".modal__input_url"),document.querySelector(".cards__list")),v=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._nameElement.textContent=t,this._jobElement.textContent=n}}({nameSelector:".profile__title",jobSelector:".profile__description"}),f=new e(o,a),b=new e(o,l),y=new s("#edit-modal",(function(e){console.log(e),v.setUserInfo({name:e.title,job:e.description})})),E=new s("#add-card-modal",(function(e){w({name:e.place,link:e.url})})),g=new class extends i{constructor(e){super({popupSelector:e})}open(e,t){this._image=this._popup.querySelector(".modal__preview-image"),this._popup.querySelector(".modal__preview-description").textContent=e,this._image.src=t,this._image.alt=e,super.open()}}("#preview-image-modal",L),S=new class{constructor(e,t){let{items:n,renderer:r}=e;this._items=n,this._renderer=r,this._cardsList=t}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._cardsList.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg "}],renderer:w},h);function w(e){const t=new n(e,"#card-template",L).renderCard();S.addItem(t)}function L(e,t){g.open(e,t)}f.enableValidation(),b.enableValidation(),y.setEventListeners(),E.setEventListeners(),g.setEventListeners(),S.renderItems(),m.addEventListener("click",(()=>{!function(){const e=v.getUserInfo();_.value=e.name,p.value=e.job,f.resetValidation(),y.open()}()})),d.addEventListener("click",(()=>{b.resetValidation(),E.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBR3ZCMUMsRUFBaUJ6RSxpQkFBaUIsU0FBUyxLQUN6Q3dGLEVBQWtCMUUsa0JBQ2xCaUYsRUFBYTNDLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBjb25maWcuc3VibWl0QnV0dG9uO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlU3VibWl0QnRuKHRoaXMuX2lucHV0RWxzLCB0aGlzLmJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWwuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+XHJcbiAgICB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcclxuXHJcbiAgdG9nZ2xlU3VibWl0QnRuKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy50b2dnbGVTdWJtaXRCdG4oKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkVGVtcGxhdGUsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gY2FyZFRlbXBsYXRlO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkVGVtcGxhdGUpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUljb24pO1xyXG4gIH1cclxuXHJcbiAgX29wZW5JbWFnZU1vZGFsKCkge1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZXNjcmlwdGlvbi1uYW1lXCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXkpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5ID0gKGUpID0+IHtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcclxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uOiBcIi5tb2RhbF9fYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZyBcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm0gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBvcGVuRWRpdE1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBwcm9maWxlRWRpdEZvcm0ucXVlcnlTZWxlY3RvcihcIiN0aXRsZS1uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPVxyXG4gIHByb2ZpbGVFZGl0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uLW5hbWVcIik7XHJcblxyXG5leHBvcnQgY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbnB1dF9wbGFjZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRVcmxJbnB1dCA9IGFkZENhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2lucHV0X3VybFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XHJcbiIsImltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgY29uZmlnLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBlZGl0UHJvZmlsZU1vZGFsLFxyXG4gIGFkZENhcmRNb2RhbCxcclxuICBvcGVuRWRpdE1vZGFsQnV0dG9uLFxyXG4gIGFkZE5ld0NhcmRCdXR0b24sXHJcbiAgcHJvZmlsZVRpdGxlRWxlbWVudCxcclxuICBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LFxyXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LFxyXG4gIGNhcmRUaXRsZUlucHV0LFxyXG4gIGNhcmRVcmxJbnB1dCxcclxuICBjYXJkTGlzdEVsZW1lbnQsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50LmpzXCI7XHJcblxyXG4vL1xyXG4vLyAgICAgIENsYXNzIENvbnN0YW50c1xyXG4vL1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGVkaXRQcm9maWxlTW9kYWwpO1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkQ2FyZE1vZGFsKTtcclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2VkaXQtbW9kYWxcIiwgc3VibWl0RWRpdFByb2ZpbGUpO1xyXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBzdWJtaXRBZGRDYXJkKTtcclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcblxyXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiByZW5kZXJDYXJkLFxyXG4gIH0sXHJcbiAgY2FyZExpc3RFbGVtZW50XHJcbik7XHJcblxyXG4vL1xyXG4vL1xyXG4vL1xyXG5cclxuZWRpdEZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZWRpdEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuLy9cclxuLy8gICAgRXZlbnQgTGlzdGVuZXJzXHJcbi8vXHJcblxyXG5vcGVuRWRpdE1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3BlblByb2ZpbGVFZGl0Rm9ybSgpO1xyXG59KTtcclxuXHJcbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhZGRGb3JtUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vXHJcbi8vICAgIEZ1bmN0aW9uc1xyXG4vL1xyXG5cclxuZnVuY3Rpb24gb3BlblByb2ZpbGVFZGl0Rm9ybSgpIHtcclxuICBjb25zdCBwcm9maWxlSW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5uYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZUluZm8uam9iO1xyXG4gIGVkaXRGb3JtVmFsaWRhdGlvbi5yZXNldFZhbGlkYXRpb24oKTtcclxuICBlZGl0Rm9ybVBvcHVwLm9wZW4oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0RWRpdFByb2ZpbGUoaW5wdXRWYWx1ZXMpIHtcclxuICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcyk7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsXHJcbiAgICBqb2I6IGlucHV0VmFsdWVzLmRlc2NyaXB0aW9uLFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRBZGRDYXJkKGlucHV0VmFsdWVzKSB7XHJcbiAgcmVuZGVyQ2FyZCh7IG5hbWU6IGlucHV0VmFsdWVzLnBsYWNlLCBsaW5rOiBpbnB1dFZhbHVlcy51cmwgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBjYXJkRGF0YSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2tcclxuICApLnJlbmRlckNhcmQoKTtcclxuICBzZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIGltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgam9iIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRzTGlzdCkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jYXJkc0xpc3QgPSBjYXJkc0xpc3Q7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5fY2FyZHNMaXN0LnByZXBlbmQoaXRlbSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRFbHMiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvbiIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5wdXRFbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlU3VibWl0QnRuIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVtb3ZlIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZGF0YSIsImNhcmRUZW1wbGF0ZSIsImhhbmRsZUltYWdlQ2xpY2siLCJfZGVmaW5lUHJvcGVydHkiLCJfbGlrZUJ1dHRvbiIsInRvZ2dsZSIsIl9lbGVtZW50IiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRUZW1wbGF0ZSIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRJbWFnZSIsIl9jYXJkRGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUljb24iLCJfb3BlbkltYWdlTW9kYWwiLCJyZW5kZXJDYXJkIiwiY2FyZFRpdGxlIiwic3JjIiwiYWx0IiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJlIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIl9wb3B1cCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1JbnB1dHMiLCJyZXNldCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJmb3JtU2VsZWN0b3IiLCJlZGl0UHJvZmlsZU1vZGFsIiwiYWRkQ2FyZE1vZGFsIiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkQ2FyZEZvcm0iLCJvcGVuRWRpdE1vZGFsQnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTGlzdEVsZW1lbnQiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJlZGl0Rm9ybVZhbGlkYXRpb24iLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRpb24iLCJlZGl0Rm9ybVBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYWRkRm9ybVBvcHVwIiwicGxhY2UiLCJ1cmwiLCJpbWFnZVBvcHVwIiwiX2ltYWdlIiwic2VjdGlvbiIsImNhcmRzTGlzdCIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY2FyZHNMaXN0IiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJjYXJkRGF0YSIsImNhcmQiLCJDYXJkIiwicHJvZmlsZUluZm8iLCJvcGVuUHJvZmlsZUVkaXRGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==